{% extends "index.html" %}
{%load static%}


{% block css %}
<link rel="stylesheet" href="{% static 'myapp/styles/product-styles.css'%}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}    
<div class="d-flex" style="min-height:70vh">

    <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 280px;">
        <a href="{% url 'vendor-dash' %}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="currentColor" class="bi bi-person-square pe-none me-2" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"/>
            </svg>
          <span class="fs-4">My Dashboard</span>
        </a>
        <hr>
        <ul class="nav nav-pills flex-column mb-auto" style="width:100%;">
          <li class="nav-item" style="width:100%">
            <a href="{% url 'edit_seller_profile' %}" class="nav-link text-white" aria-current="page">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-person-fill-gear pe-none me-2" viewBox="0 0 16 16">
                    <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4m9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/>
                </svg>Edit Seller Profile
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'myapp:create_item' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus-fill pe-none me-2" viewBox="0 0 16 16">
                <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0"/>
              </svg>
              Add New Products
            </a>
          </li>
          <li class="nav-item" style="width:100%;">
            <a href="{% url 'active_items' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check-fill pe-none me-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3"/>
              </svg>
                Active Products
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'orders' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-check-fill pe-none me-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0m-.646 5.354a.5.5 0 0 0-.708-.708L7.5 10.793 6.354 9.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
              </svg>
                Orders
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'reviews' %}" class="nav-link active">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up-fill pe-none me-2" viewBox="0 0 16 16">
                <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
              </svg>
                Reviews
            </a>
          </li>
          <li style="width:100%;">
            <a href="#" class="nav-link text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-headset pe-none me-2" viewBox="0 0 16 16">
                    <path d="M8 1a5 5 0 0 0-5 5v1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a6 6 0 1 1 12 0v6a2.5 2.5 0 0 1-2.5 2.5H9.366a1 1 0 0 1-.866.5h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 .866.5H11.5A1.5 1.5 0 0 0 13 12h-1a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1V6a5 5 0 0 0-5-5"/>
                </svg>
                Customer Support
            </a>
          </li>
        </ul>
        <hr>
      </div>

<!------------------------------------------------------------------------------------------------------------->
  
  <div class="bg-body-secondary pb-2 mt-1">
      <div class="card">
        <div class="mt-4 mb-4">
          <h3 class="mt-3 mb-5 mx-4 fw-bold text-muted">Rating Summary :</h3>
          <div class=" p-2 d-flex align-items-center justify-content-around ms-4" style="width: 100%;">
           <div class="col-5">
            <!-----------------------------------------------------------------------------------------------------------
              DONT LEAVE SPACE BETWEEN STYLE TAG & CLASS TAG OR ELSE THE STYLE TAG WILL NOT 
              ACCEPT THE THE VALUE IN WIDTH VARIABLE.
            ------------------------------------------------------------------------------------------------------------>
            <p class="fw-bold text14 text-primary">1 Star</p>   
          <div class="progress mb-2" role="progressbar" aria-label="Basic example" aria-valuenow="{{one_bar}}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar bg-danger fw-bold"style="width: {{one_bar}}%">{{one_bar|floatformat:2}}%</div>
          </div>
          <p class="fw-bold text14 text-primary">2 Stars</p>
          <div class="progress mb-2" role="progressbar" aria-label="Basic example" aria-valuenow="{{two_bar}}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar fw-bold"style="width: {{two_bar}}%; background-color: orangered;">{{two_bar|floatformat:2}}%</div>
          </div>
          <p class="fw-bold text14 text-primary">3 Stars</p>
          <div class="progress mb-2" role="progressbar" aria-label="Basic example" aria-valuenow="{{three_bar}}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar bg-warning text-dark fw-bold"style="width: {{three_bar}}%">{{three_bar|floatformat:2}}%</div>
          </div>
          <p class="fw-bold text14 text-primary">4 Stars</p>
          <div class="progress mb-2" role="progressbar" aria-label="Basic example" aria-valuenow="{{four_bar}}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar bg-success fw-bold"style="width: {{four_bar}}%">{{four_bar|floatformat:2}}%</div>
          </div>
          <p class="fw-bold text14 text-primary">5 Stars</p>
          <div class="progress mb-2" role="progressbar" aria-label="Basic example" aria-valuenow="{{five_bar}}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar fw-bold"style="width: {{five_bar}}%; background-color:darkgreen;">{{five_bar|floatformat:2}}%</div>
          </div>
        </div>


            <div class="col-6 px-3">
              <h5 class="mt-3 mb-2 ps-1 text-muted fw-bold">Average Rating: </h5>
            <div class="mt-0 rating px-1"><p class="p-1 m-1 fs-3 d-flex align-items-center">
              <span id="avgrate" class="pe-2 fw-bold font">{{avg_rating|floatformat:1}}</span> 
              <span id="star" class="d-flex align-items-center gap-1" >
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill" id="1" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
    
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill" id="2" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
    
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill" id="3" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
    
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill" id="4" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
    
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill" id="5" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
              </span></p></div>
              <p class="text18 ms-3 mb-4 fw-bold text-primary" href="#scroll">{{review_length}} Reviews</p>
              <div class="flex-fill ms-3">
                <h5 class="text-primary fw-bold">Top Rated: </h5>
                {% for item in top_rated %}
                <p class="text14 text-muted fw-bold">{{forloop.counter}}. {{item}}</p>
                {% endfor %}
              </div>
            </div>
          </div>

<!-------------------------------------------------------------------------------------------------------------->

        <h3 class="mt-5 mb-3 mx-4 fw-bold text-muted">Reviews :</h3>

          <div class="d-block">
            {% for rev in review %}
                <div class="m-2 p-3 mx-3">
                  <div class="border border-black-1 rounded-4">
                    <div class="border-bottom-0"></div>
                  <div class="p-2 pt-0">
                    
                        <div class="d-block p-3">
                          <div class="d-flex justify-content-between">
                            <p class="fw-bold text18 text-primary">Item: {{rev.item}}</p>
                            <p class="text-muted text14 fw-bold">{{rev.created_at}}</p>
                          </div>
                          <p class="text-muted fw-bold text14 text-primary">Buyer: {{rev.user.first_name|capfirst}} {{rev.user.last_name|capfirst}}</p>
                          <div class="d-flex align-items-center gap-3">
                            {% if rev.rating == 4 or rev.rating == 5 %}
                              <p class="p-1 px-2 mt-1 rounded-2 fw-bold" id="discountPrice">{{rev.rating}} stars</p>
                            {% elif rev.rating == 3 %}
                            <p class="p-1 px-2 mt-1 rounded-2 bg-warning" id="userrating">{{rev.rating}} stars</p>  
                            {% else %}
                              <p class="p-1 px-2 mt-1 rounded-2" id="userrating">{{rev.rating}} stars</p>
                            {% endif %}
                          <div class="p-2 px-0">
                          <span id="star" class="gap-1 d-flex align-items-center justify-content-center" >
                            
                            {% with ''|center:rev.rating as range %}
                            {% for i in range %}
                            
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill star" id="rate" viewBox="0 0 16 16">
                              <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                            </svg>
                            {% endfor %}
                            {% endwith %}
                        </span></div>
                        
                      </div>
                        <p class="text14 fw-bold text-muted mt-3">Comment:</p>
                        <p class="text14 fw-bold text-muted">{{rev.review}}</p>
                      </div>
                  </div>
                </div>
              </div> 
            {% endfor %}
          </div>       
        </div>
      </div>
    </div>

<!------------------------------------------------------------------------------------------------------------>
</div>
      
  
{% endblock %}


{%block script%}<script src="{% static 'myapp/scripts/rating.js'%}"></script>{%endblock%}
