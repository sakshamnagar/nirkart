{% extends 'index.html' %}
{% load static %}

{% block css %}
{% endblock %}

{% block content%}

{% if user.is_authenticated %}

<div class="d-flex" style="min-height:70vh">

    <div class="d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 280px;">
        <a href="{% url 'vendor-dash' %}" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="currentColor" class="bi bi-person-square pe-none me-2" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"/>
            </svg>
          <span class="fs-4">My Dashboard</span>
        </a>
        <hr>
        <ul class="nav nav-pills flex-column mb-auto" style="width:100%;">
          <li class="nav-item" style="width:100%">
            <a href="{% url 'edit_seller_profile' %}" class="nav-link text-white" aria-current="page">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-person-fill-gear pe-none me-2" viewBox="0 0 16 16">
                    <path d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4m9.886-3.54c.18-.613 1.048-.613 1.229 0l.043.148a.64.64 0 0 0 .921.382l.136-.074c.561-.306 1.175.308.87.869l-.075.136a.64.64 0 0 0 .382.92l.149.045c.612.18.612 1.048 0 1.229l-.15.043a.64.64 0 0 0-.38.921l.074.136c.305.561-.309 1.175-.87.87l-.136-.075a.64.64 0 0 0-.92.382l-.045.149c-.18.612-1.048.612-1.229 0l-.043-.15a.64.64 0 0 0-.921-.38l-.136.074c-.561.305-1.175-.309-.87-.87l.075-.136a.64.64 0 0 0-.382-.92l-.148-.045c-.613-.18-.613-1.048 0-1.229l.148-.043a.64.64 0 0 0 .382-.921l-.074-.136c-.306-.561.308-1.175.869-.87l.136.075a.64.64 0 0 0 .92-.382l.045-.148ZM14 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0"/>
                </svg>Edit Seller Profile
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'myapp:create_item' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-plus-fill pe-none me-2" viewBox="0 0 16 16">
                <path d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M8.5 7v1.5H10a.5.5 0 0 1 0 1H8.5V11a.5.5 0 0 1-1 0V9.5H6a.5.5 0 0 1 0-1h1.5V7a.5.5 0 0 1 1 0"/>
              </svg>
              Add New Products
            </a>
          </li>
          <li class="nav-item" style="width:100%;">
            <a href="{% url 'active_items' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check-fill pe-none me-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3"/>
              </svg>
                Active Products
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'orders' %}" class="nav-link active">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bag-check-fill pe-none me-2" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0m-.646 5.354a.5.5 0 0 0-.708-.708L7.5 10.793 6.354 9.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
              </svg>
                Orders
            </a>
          </li>
          <li style="width:100%;">
            <a href="{% url 'reviews' %}" class="nav-link text-white">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up-fill pe-none me-2" viewBox="0 0 16 16">
                <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
              </svg>
                Reviews
            </a>
          </li>
          <li style="width:100%;">
            <a href="#" class="nav-link text-white">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-headset pe-none me-2" viewBox="0 0 16 16">
                    <path d="M8 1a5 5 0 0 0-5 5v1h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V6a6 6 0 1 1 12 0v6a2.5 2.5 0 0 1-2.5 2.5H9.366a1 1 0 0 1-.866.5h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 .866.5H11.5A1.5 1.5 0 0 0 13 12h-1a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1V6a5 5 0 0 0-5-5"/>
                </svg>
                Customer Support
            </a>
          </li>
        </ul>
        <hr>
      </div>

<!------------------------------------------------------------------------------------------------------------->

      <div class="d-flex" style="min-height: max-content;">
        <div class="p-1 ps-2 flex-fill">
          <div class="px-0">
            <div><h3 class="text-primary text-muted m-4 mb-0">My Orders</h3></div>
            <div class="container mt-4 mb-4 px-0"> 
              
              <div class="container d-flex justify-content-center mt-4 px-0">
                    <div class="m-3 px-0">
                      {% if orders %}
                      {% for order in orders %}
                      <div><h6 class="text-primary text-muted ms-3">{{order.created_at}}</h6></div>
                      <div class="card productdetails mb-5 ms-3">
                        <a class="p-1" href="" style="background-color:green;">
                          <div class="pt-1 px-3 d-flex justify-content-between">
                            <p class="fs-6 font text-white">Status: {{order.status}}
                              {% if order.status == 'Order_Placed' %}
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                              </svg>
                              {% else %}
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check2-all" viewBox="0 0 16 16">
                                <path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l7-7zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0z"/>
                                <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708"/>
                              </svg>
                              {% endif %} 
                            </p>
                            <p class="fs-6 font text-white">Order: ODR#{{order.order_id}}</p>
                          </div>
                          </a>
                        <div class="border-bottom-0"></div>
                        
                      <div class="modal-body p-2 pt-0">
                        
                        <div class="d-flex justify-content-between gap-4 align-items-center mt-2 p-2">
                          
                          <div><img style="height: 100px; width: 100px;" class="rounded-4" src="{{order.item_image}}" alt="{{order.item_name}}"></div>
                          <div class="fs-6 font" style="width: 32vw;">
                            <span class="text-primary fw-bold">{{order.item_name}}</span> 
                            <br> 
                            <strong class="text18">₹{{order.item_discounted_price}}</strong>
                            {% if order.item_discount %}
                            <span class="text-decoration-line-through text-danger">₹{{order.item_price}}</span>
                            <span id="discountPrice">{{order.item_discount}}% OFF</span>
                            {% endif %}
                            <br>
                            <span class="text14 fw-bold text-muted">Quantity: {{order.item_quantity}}</span>
                            <br>
                            <span class="text14 fw-bold text-primary">Buyer: {{order.buyer}}</span>
                          </div>
                            
                          <div class="grid-items justify-content-center">
                              <a class="btn btn-success mb-2 d-flex align-items-center fw-bold" href="">
                                Contact Buyer
                              </a>
                              <form method="post">
                                {% csrf_token %}
                                <select name="status" onChange="this.form.submit();" class="form-select fw-bold text-muted" id="id_status">
                                  <option value="Order_Placed" selected disabled hidden><span>Change Status</span></option>
                                
                                  <option value="Order_Confirmed">Order Confirmed</option>
                                
                                  <option value="Order_Shipped">Order Shipped</option>
                                
                                  <option value="Order_Cancelled">Order Cancelled</option>
                                
                                </select>
                              <input type="hidden" name="order" value="{{order.order_id}}">
                            </form>
                          </div> 
                        </div>                 
                      </div>
                    </div>
                    {% endfor %}
                    {% else %}
                        <div><h5 class="text-primary text-muted">No Orders...</h5></div>
                    {% endif %}
                  </div>
              </div>

<!------------------------------------------------------------------------------------------------------------->

              <div><h3 class="text-primary text-muted m-4 mt-5 mb-0">Completed Orders:</h3></div>
              <div class="container mt-4 mb-4 px-0"> 
                
                <div class="container d-flex justify-content-center mt-4 px-0">
                      <div class="m-3 px-0">
                        {% if completed_order %}
                        {% for order in completed_order %}
                        <div><h6 class="text-primary text-muted ms-3">{{order.created_at}}</h6></div>
                        <div class="card productdetails mb-5 ms-3">
                          {% if order.status == 'Order_Cancelled' %}
                          <a class="p-1" href="" style="background-color: orangered;">
                            <div class="pt-1 px-3 d-flex justify-content-between">
                              <p class="fs-6 font text-white">Status: {{order.status}}
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
                                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                                  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                                </svg>
                              </p>
                              <p class="fs-6 font text-white">Order: ODR#{{order.order_id}}</p>
                            </div>
                            </a>
                          {% else %}  
                          <a class="p-1" href="" style="background-color: seagreen;">
                            <div class="pt-1 px-3 d-flex justify-content-between">
                              <p class="fs-6 font text-white">
                                Status: 
                                {{order.status}}
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-check2-circle" viewBox="0 0 16 16">
                                  <path d="M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"/>
                                  <path d="M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"/>
                                </svg>
                              </p>
                              <p class="fs-6 font text-white text14">Order Number: ODR#{{order.order_id}}</p>
                            </div>
                            </a>
                          {% endif %}
                          <div class="border-bottom-0"></div>
                          
                        <div class="modal-body p-2 pt-0">
                          
                          <div class="d-flex justify-content-between gap-4 align-items-center mt-2 p-2">
                            
                            <div><img style="height: 100px; width: 100px;" class="rounded-4" src="{{order.item_image}}" alt="{{order.item_name}}"></div>
                            <div class="fs-6 font" style="width: 32vw;">
                              <span class="text-primary fw-bold">{{order.item_name}}</span> 
                              <br> 
                              <strong class="text18">₹{{order.item_discounted_price}}</strong>
                              {% if order.item_discount %}
                              <span class="text-decoration-line-through text-danger">₹{{order.item_price}}</span>
                              <span id="discountPrice">{{order.item_discount}}% OFF</span>
                              {% endif %}
                              <br>
                              <span class="text14 fw-bold text-muted">Quantity: {{order.item_quantity}}</span>
                              <br>
                              <span class="text14 fw-bold text-primary">Buyer: {{order.buyer}}</span>
                            </div>
                              
                            <div class="grid-items justify-content-center">
                                <a class="btn btn-success mb-2 d-flex align-items-center" href="">
                                  Contact Buyer
                                </a>
    
                                <a class="btn d-flex align-items-center" style="background-color: orange;" href="">
                                  Cancel  Order
                                </a>
                            </div> 
                          </div>                 
                        </div>
                      </div>
                      {% endfor %}
                      {% else %}
                      <div><h5 class="text-primary text-muted">No Orders...</h5></div>
                      {% endif %}
                    </div>
                </div>         
            </div> 
          </div>
        </div>
        </div>
<!--------->




</div>












{% endif %}
{% endblock %}